import{m as q,r as c,e as H,q as W,C as Y,s as G,l as U,g as d,o as p,c as J,d as l,h as t,w as r,z as V,a as g,S as Q,i as X,t as A,A as Z}from"./index-9455c001.js";import{L as ee}from"./LoadingSpinner-cd745a8e.js";const le={class:"grid h-full"},oe={class:"col-12"},te={class:"card"},ae=l("h5",{class:"mt-2"},"Dispenser Machines",-1),se={class:"col-12"},ne={class:"flex justify-content-end"},ie=l("i",{class:"pi pi-search"},null,-1),de={class:"mt-2"},ce={class:"mt-5 mx-0 p-fluid grid"},re={class:"full lg:col-12 md:col-12 sm:col-12"},ue=l("label",{for:"name"},"Cliente:",-1),me={class:"full lg:col-6 md:col-9 sm:col-12"},pe=l("label",{for:"email"},"Numero da DM:",-1),he={class:"full lg:col-6 md:col-9 sm:col-12"},fe=l("label",{for:"email"},"Identificação da DM:",-1),ve={class:"full lg:col-12 md:col-4 sm:col-12"},_e=l("label",{class:"mt-3 ml-4",for:"switch2"},"DM Ativo?",-1),ye=l("h5",{class:"mt-2"},"Opções de DM",-1),be={class:"mt-5 mx-0 p-fluid grid"},Ve=l("label",{for:"fim"},null,-1),ge={id:"fim",class:"checkbox-container flex align-content-end flex-wrap"},we={class:"checkbox-items m-2 flex align-items-end"},De=l("label",{for:"Voucher",class:"ml-2"}," Voucher ",-1),Me={class:"checkbox-items m-2 flex align-items-center"},xe=l("label",{for:"cracha",class:"ml-2"}," Crachá ",-1),Ce={class:"checkbox-items m-2 flex align-items-center"},Ie=l("label",{for:"Biometria",class:"ml-2"}," Biometria ",-1),Se={class:"checkbox-items m-2 flex align-items-center"},ke=l("label",{for:"Facial",class:"ml-2"}," Rec. Facial ",-1),Ue={class:"full lg:col-12 md:col-4 sm:col-12"},Ae=l("label",{class:"mt-3 ml-4",for:"switch3"},"Usa Mob?",-1),Te={class:"full lg:col-6 md:col-6 sm:col-12"},Be=l("label",{for:"senha"},"UserID API:",-1),ze={class:"full lg:col-6 md:col-6 sm:col-12"},Ne=l("label",{for:"senha"},"Senha API:",-1),Pe={class:"full lg:col-6 md:col-6 sm:col-12"},Fe=l("label",{for:"senha"},"IdCliente API:",-1),$e={class:"full lg:col-6 md:col-6 sm:col-6"},Ee=l("label",{for:"codigo"},"Senha Chave:",-1),Le={class:"flex align-items-center justify-content-end field col-12"},je=l("h5",{class:"mt-2"},"Controladoras",-1),Oe={class:"mt-5 mx-0 p-fluid grid"},Re={class:"col-12"},Ke={class:"flex align-items-center justify-content-end field col-12"},Ge={__name:"DM",setup(qe){const M=q(),h=c(0),f=H(),w=c(!1),a=W({nome:"",usuario:"",senha:"",cliente:""}),x=c([]),v=c(!1);c([{name:"Ativo",code:"ativo"},{name:"Inativo",code:"inativo"}]);const _=c({global:{value:null,matchMode:Z.CONTAINS}});c();const C=c([]),T=c([{nome:"DM 1",code:"plt1"},{nome:"DM 2",code:"plt2"},{nome:"DM 3",code:"plt3"},{nome:"DM 4",code:"plt4"},{nome:"DM 5",code:"plt5"},{nome:"DM 6",code:"plt6"},{nome:"DM 7",code:"plt7"},{nome:"DM 8",code:"plt8"}]),B=c([]),I={label:"Todos",value:null},z=c([I]),N=()=>{M.add({severity:"success",summary:"Successful",detail:"Usuario WEB criado",life:3e3})},P=()=>{M.add({severity:"success",summary:"Successful",detail:"Maquinas Salvas para o Usuario",life:3e3})},F=s=>{show.value=!0,a.value=s.data},$=()=>f.userRole==="Administrador",E=s=>{if(!s)return"";try{const e=new Date(s);if(isNaN(e))throw new Error("Data inválida");const i=new Date(e.getTime()+e.getTimezoneOffset()*6e4),u=String(i.getDate()).padStart(2,"0"),D=String(i.getMonth()+1).padStart(2,"0"),n=i.getFullYear(),m=String(i.getHours()).padStart(2,"0"),y=String(i.getMinutes()).padStart(2,"0");return`${u}/${D}/${n} ${m}:${y}`}catch(e){return console.error("Erro ao formatar data:",e),"Data inválida"}};Y(h,(s,e)=>{s!==e&&s===0&&(v.value=!1)}),G(()=>{L(),j()});const L=async()=>{const s={id_cliente:f.userIdCliente};try{const e=await U.post("/usuarios/listarPlanta",s,{headers:{Authorization:`Bearer ${f.token}`}});z.value=[I,...e.data.map(({id_planta:i})=>({label:`Planta  ${i}`,value:i}))]}catch(e){console.error("Erro ao buscar opções de plantas:",e)}},j=async()=>{w.value=!0;try{const s=await U.post("/admin/cliente/listar",{headers:{Authorization:`Bearer ${f.token}`}});x.value=s.data.map(({id_cliente:e,nome:i})=>({label:i,value:e}))}catch(s){console.error("Erro ao listar plantas:",s)}finally{w.value=!1}};return(s,e)=>{const i=d("InputIcon"),u=d("InputText"),D=d("IconField"),n=d("Column"),m=d("Button"),y=d("DataTable"),S=d("TabPanel"),O=d("Dropdown"),k=d("InputSwitch"),b=d("Checkbox"),R=d("Textarea"),K=d("TabView");return p(),J("div",le,[l("div",oe,[l("div",te,[ae,t(K,{activeIndex:h.value,"onUpdate:activeIndex":e[17]||(e[17]=o=>h.value=o)},{default:r(()=>[t(S,{header:"Listar Dispenser Machines"},{default:r(()=>[l("div",se,[t(y,{filters:_.value,"onUpdate:filters":e[1]||(e[1]=o=>_.value=o),value:B.value,selectionMode:"single",tableStyle:"min-width: 25%",rowsPerPageOptions:[5,10,20,50],stripedRows:"",dataKey:"id",metaKeySelection:!1,onRowSelect:F,paginator:"",rows:10,globalFilterFields:["id_DM","nome","email","nome_cliente","local","atualizado"]},{header:r(()=>[l("div",ne,[t(D,{iconPosition:"left"},{default:r(()=>[t(i,null,{default:r(()=>[ie]),_:1}),t(u,{modelValue:_.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value.global.value=o),placeholder:"Busca"},null,8,["modelValue"])]),_:1})])]),default:r(()=>[t(n,{field:"id_DM",header:"Id"}),t(n,{field:"nome",header:"Número"}),t(n,{field:"email",header:"Identificação"}),t(n,{field:"nome_cliente",header:"Cliente"}),t(n,{field:"local",header:"Localização"}),t(n,{field:"ativo",header:"Ativo"},{body:r(({data:o})=>[l("i",{class:Q(["pi",{"pi-check-circle text-green-500 ":o.ativo,"pi-times-circle text-red-500":!o.ativo}])},null,2)]),_:1}),t(n,{field:"atualizado",header:"Atualizado"},{body:r(({data:o})=>[X(A(E(new Date(o.last_login))),1)]),_:1}),t(n,{style:{"min-width":"8rem"}},{body:r(o=>[t(m,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:He=>s.deleteUsuario(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["filters","value"])])]),_:1}),$()?(p(),V(S,{key:0,header:"Adicionar Dispenser Machines"},{default:r(()=>[l("h5",de,A(v.value?"Editar ":"Nova ")+"Dispenser Machines",1),l("div",ce,[l("div",re,[ue,t(O,{class:"my-2",modelValue:a.cliente,"onUpdate:modelValue":e[2]||(e[2]=o=>a.cliente=o),options:x.value,optionLabel:"label",optionValue:"value",placeholder:"Selecione um"},null,8,["modelValue","options"])]),l("div",me,[pe,t(u,{class:"my-2",modelValue:a.usuario,"onUpdate:modelValue":e[3]||(e[3]=o=>a.usuario=o),id:"email"},null,8,["modelValue"])]),l("div",he,[fe,t(u,{class:"my-2",modelValue:a.usuario,"onUpdate:modelValue":e[4]||(e[4]=o=>a.usuario=o),id:"email"},null,8,["modelValue"])]),l("div",ve,[_e,t(k,{class:"grid mt-3 ml-3",modelValue:a.status,"onUpdate:modelValue":e[5]||(e[5]=o=>a.status=o),inputId:"switch2"},null,8,["modelValue"])])]),ye,l("div",be,[Ve,l("div",ge,[l("div",we,[t(b,{modelValue:a.voucher,"onUpdate:modelValue":e[6]||(e[6]=o=>a.voucher=o),inputId:"Voucher",value:"Voucher",binary:!0},null,8,["modelValue"]),De]),l("div",Me,[t(b,{modelValue:a.cracha,"onUpdate:modelValue":e[7]||(e[7]=o=>a.cracha=o),inputId:"cracha",value:"cracha",binary:!0},null,8,["modelValue"]),xe]),l("div",Ce,[t(b,{modelValue:a.biometria,"onUpdate:modelValue":e[8]||(e[8]=o=>a.biometria=o),inputId:"Biometria",value:"Biometria",binary:!0},null,8,["modelValue"]),Ie]),l("div",Se,[t(b,{modelValue:a.facial,"onUpdate:modelValue":e[9]||(e[9]=o=>a.facial=o),inputId:"Facial",value:"Facial",binary:!0},null,8,["modelValue"]),ke])]),l("div",Ue,[Ae,t(k,{class:"grid mt-3 ml-3",modelValue:a.Mob,"onUpdate:modelValue":e[10]||(e[10]=o=>a.Mob=o),inputId:"switch3"},null,8,["modelValue"])]),l("div",Te,[Be,t(u,{class:"my-2",id:"senha",modelValue:a.senha,"onUpdate:modelValue":e[11]||(e[11]=o=>a.senha=o),type:"password"},null,8,["modelValue"])]),l("div",ze,[Ne,t(u,{class:"my-2",id:"senha",modelValue:a.senha,"onUpdate:modelValue":e[12]||(e[12]=o=>a.senha=o),type:"password"},null,8,["modelValue"])]),l("div",Pe,[Fe,t(u,{class:"my-2",id:"senha",modelValue:a.senha,"onUpdate:modelValue":e[13]||(e[13]=o=>a.senha=o),type:"password"},null,8,["modelValue"])]),l("div",$e,[Ee,t(R,{modelValue:a.textoretirada,"onUpdate:modelValue":e[14]||(e[14]=o=>a.textoretirada=o),class:"my-2 overflow-scroll",rows:"5",cols:"30"},null,8,["modelValue"])]),l("div",Le,[t(m,{label:"Salvar",icon:"pi pi-check",severity:"info",onClick:N,class:"m-2"})])]),je,l("div",Oe,[t(m,{label:"Adicionar Controladoras",icon:"pi pi-check",severity:"info",onClick:s.adicionarDM,class:"full mt-4 mr-2"},null,8,["onClick"])]),l("div",Re,[t(y,{selection:C.value,"onUpdate:selection":e[15]||(e[15]=o=>C.value=o),value:T.value,dataKey:"code",tableStyle:"width:100% min-width: 50rem",size:s.small},{default:r(()=>[t(n,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(n,{field:"code",header:"Code",class:"col-12 md:col-6",style:{width:"30%"}}),t(n,{field:"nome",header:"Name",class:"col-12 md:col-6",style:{width:"70%"}})]),_:1},8,["selection","value","size"]),l("div",Ke,[v.value?(p(),V(m,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Atualizar",icon:"pi pi-refresh",severity:"primary",onClick:P})):g("",!0),t(m,{style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Voltar",icon:"pi pi-arrow-left",severity:"primary",onClick:e[16]||(e[16]=o=>h.value=0)}),v.value?g("",!0):(p(),V(m,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:s.adicionarCliente},null,8,["onClick"]))])])]),_:1})):g("",!0)]),_:1},8,["activeIndex"]),w.value?(p(),V(ee,{key:0})):g("",!0)])])])}}};export{Ge as default};
