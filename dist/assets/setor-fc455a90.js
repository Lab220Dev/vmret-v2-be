import{r as n,e as X,m as Y,q as Z,C as ee,s as oe,g as m,o as y,c as R,h as l,w as i,d as o,k as te,y as c,z as q,a as C,i as h,t as N,l as P}from"./index-aaf86b94.js";/* empty css             */const le={class:"card vh"},ae={class:"col-12"},se={class:"grid"},ne={class:"col-12"},ie={class:"card"},de={class:"p-fluid formgrid grid m-0 p-0"},re={class:"full lg:col-12 md:col-12 sm:col-12"},ce=o("label",{for:"codigo"},"Código:",-1),ue={class:"full lg:col-12 md:col-12 sm:col-12"},me=o("label",{for:"nome"},"Setor (Nome):",-1),ve={class:"full lg:col-12 md:col-12 sm:col-12"},pe=o("label",{for:"centro"},"Centro de Custo (Nome):",-1),fe={class:"mr-1 mt-4 grid justify-content-end"},_e={class:"col-12"},be={class:"p-fluid formgrid grid"},ye={class:"field lg:col-12 md:col-6 sm:col-4"},ge=o("label",{class:"mr-2",for:"name"},"Nome:",-1),Se={class:"field lg:col-4 md:col-6 sm:col-4"},ke=o("label",{class:"mr-2",for:"Quantidade"},"Quantidade:",-1),Ce={class:"grid"},he={class:"col-12"},Ve=o("label",{for:"Produto",class:"mr-2 font-semibold col-2"},"Produto: ",-1),xe={class:"col-12"},we=o("label",{for:"Quantidade",class:"font-semibold w-6rem mr-2"},"Quantidade: ",-1),Ie={class:"flex justify-content-end gap-2"},qe={class:"confirmation-content"},De=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ue={key:0},ze={class:"confirmation-content"},Ne=o("i",{class:"pi pi-exclamation-triangle mr-1",style:{"font-size":"2rem"}},null,-1),Te={__name:"setor",setup(Pe){const r=n(0),f=X(),V=Y(),K=n([]);n([]);const x=n(!1);n([]);const g=n(!1),D=n(!1),_=n(!1),v=n(!1),L=n(!1),u=n({}),p=n({}),U=n([]);let a=Z({codigo:"",nome:"",centro:""});const M=s=>{a.codigo=s.data.codigo,a.nome=s.data.nome,a.centro=s.data.centro,r.value=1,v.value=!0},F=()=>{v.value?B():A()},S=async()=>{const s={id_cliente:f.userIdCliente};try{K.value=s}catch(e){console.error("Erro ao buscar Setores:",e)}},A=async()=>{const s={id_cliente:f.userIdCliente,...a};try{const e=await P.post("/setor/adicionar",s,{headers:{Authorization:`Bearer ${f.token}`}});S(),r.value=0,w()}catch(e){console.error("Erro ao adicionar um Setor:",e)}},O=async()=>{let s={id_setor:a.id_setor};try{await P.post("/setor/deleteSetor",s,{headers:{Authorization:`Bearer ${f.token}`}}),V.add({severity:"success",summary:"Successful",detail:"Setor Deletado",life:3e3}),g.value=!1,S(),r.value=0,w()}catch{V.add({severity:"error",summary:"Error",detail:"Erro ao deletar o setor.",life:3e3})}r.value=0},B=async()=>{const s={id_cliente:f.userIdCliente,...a};try{const e=await P.post("/setor/atualizar",s,{headers:{Authorization:`Bearer ${f.token}`}});S(),r.value=0,w()}catch(e){console.error("Erro ao atualizar Setor:",e)}};ee(r,(s,e)=>{s!==e&&s===0&&(w(),S(),_.value=!1,v.value=!1)});const w=()=>{a.codigo="",a.nome="",a.centro="",L.value=!1},G=async s=>{await M(s)};oe(()=>{S(),$.value=H});const T=()=>{U.sku!==p.value.sku?(U.push(p.value),p.value={},_.value=!1,V.add({severity:"success",summary:"Successful",detail:"Item Adicionado",life:3e3})):(U[findIndexById(u.value.sku)]=u.value,V.add({severity:"success",summary:"Successful",detail:"Item atualizado",life:3e3}),u.value={},x.value=!1)},$=n([]);n([{sku:123,quantidade:1},{sku:647,quantidade:1},{sku:563,quantidade:1},{sku:436,quantidade:1},{sku:279,quantidade:1}]);const E=n([{name:"Post-it",sku:98374,quantidade:0},{name:"caderno",sku:827642,quantidade:0},{name:"corretivo",sku:7462,quantidade:0},{name:"clipe de papel",sku:2978264,quantidade:0}]),H=[{codigo:1,nome:"Setor 1",centro:"Centro 1"},{codigo:2,nome:"Setor 2",centro:"Centro 2"},{codigo:3,nome:"Setor 3",centro:"Centro 3"},{codigo:4,nome:"Setor 4",centro:"Centro 4"},{codigo:5,nome:"Setor 5",centro:"Centro 5"},{codigo:6,nome:"Setor 6",centro:"Centro 6"},{codigo:7,nome:"Setor 7",centro:"Centro 7"},{codigo:8,nome:"Setor 8",centro:"Centro 8"},{codigo:9,nome:"Setor 9",centro:"Centro 9"},{codigo:10,nome:"Setor 10",centro:"Centro 10"}];return(s,e)=>{const b=m("Column"),Q=m("DataTable"),z=m("TabPanel"),k=m("InputText"),d=m("Button"),j=m("TabView"),I=m("Dialog"),J=m("Dropdown"),W=m("InputNumber");return y(),R("div",le,[l(j,{activeIndex:r.value,"onUpdate:activeIndex":e[19]||(e[19]=t=>r.value=t)},{default:i(()=>[l(z,{header:"Listar Setores"},{default:i(()=>[o("div",ae,[l(Q,{value:$.value,stripedRows:"",selectionMode:"single",tableStyle:"min-width: 25%",rowsPerPageOptions:[5,10,20,50],rows:10,dataKey:"codigo",metaKeySelection:!1,onRowSelect:G},{default:i(()=>[l(b,{field:"codigo",header:"Código"}),l(b,{field:"nome",header:"Setor (Nome)"}),l(b,{field:"centro",header:"Centro de Custo"})]),_:1},8,["value"])])]),_:1}),l(z,{header:"Adicionar Setor",activeIndex:r.value,"onUpdate:activeIndex":e[18]||(e[18]=t=>r.value=t)},{default:i(()=>[o("div",se,[o("div",ne,[o("div",ie,[o("form",{onSubmit:te(F,["prevent"])},[o("div",de,[o("div",re,[ce,l(k,{class:"my-2",id:"codigo",modelValue:c(a).codigo,"onUpdate:modelValue":e[0]||(e[0]=t=>c(a).codigo=t),required:""},null,8,["modelValue"])]),o("div",ue,[me,l(k,{class:"my-2",id:"nome",modelValue:c(a).nome,"onUpdate:modelValue":e[1]||(e[1]=t=>c(a).nome=t),required:""},null,8,["modelValue"])]),o("div",ve,[pe,l(k,{class:"my-2",id:"id_centro_custo",modelValue:c(a).centro,"onUpdate:modelValue":e[2]||(e[2]=t=>c(a).centro=t),required:""},null,8,["modelValue"])])]),o("div",fe,[v.value?(y(),q(d,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"primary",onClick:B})):C("",!0),v.value?(y(),q(d,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Excluir",icon:"pi pi-trash",severity:"danger",onClick:e[3]||(e[3]=t=>g.value=!0)})):C("",!0),v.value?C("",!0):(y(),q(d,{key:2,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:A}))]),o("div",_e,[v.value?(y(),q(j,{key:0},{default:i(()=>[l(z,{header:"Itens Disponíveis para o Setor"},{default:i(()=>[l(d,{class:"my-3",onClick:e[4]||(e[4]=t=>_.value=!0),label:"Adicionar"}),l(Q,{class:"",value:E.value,stripedRows:"",dataKey:"sku",modelValue:c(a).itemsSelecionadosSetor,"onUpdate:modelValue":e[5]||(e[5]=t=>c(a).itemsSelecionadosSetor=t)},{default:i(()=>[l(b,{field:"sku",header:"SKU"}),l(b,{field:"quantidade",header:"Quantidade"}),l(b,{field:"prazo",header:"Prazo"})]),_:1},8,["value","modelValue"])]),_:1})]),_:1})):C("",!0),l(I,{visible:x.value,"onUpdate:visible":e[9]||(e[9]=t=>x.value=t),style:{width:"450px"},header:"Edição do Item",modal:!0,class:"p-fluid"},{footer:i(()=>[l(d,{label:"Cancelar",icon:"pi pi-times",text:"",onClick:e[8]||(e[8]=t=>x.value=!1)}),l(d,{label:"Salvar",icon:"pi pi-check",text:"",onClick:T})]),default:i(()=>[o("div",null,[o("div",be,[o("div",ye,[ge,l(k,{disabled:"",modelValue:u.value.name,"onUpdate:modelValue":e[6]||(e[6]=t=>u.value.name=t),id:"name",type:"text"},null,8,["modelValue"])]),o("div",Se,[ke,l(k,{id:"Quantidade",modelValue:u.value.quantidade,"onUpdate:modelValue":e[7]||(e[7]=t=>u.value.quantidade=t)},null,8,["modelValue"])])])])]),_:1},8,["visible"]),l(I,{visible:_.value,"onUpdate:visible":e[13]||(e[13]=t=>_.value=t),modal:"",header:"Adicionar Itens do Setor"},{default:i(()=>[o("div",Ce,[o("div",he,[Ve,l(J,{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=t=>p.value=t),options:E.value,optionLabel:"name",placeholder:"Selecione um produto",class:"col-8 p-0"},null,8,["modelValue","options"])]),o("div",xe,[we,l(W,{id:"Quantidade",modelValue:p.value.quantidade,"onUpdate:modelValue":e[11]||(e[11]=t=>p.value.quantidade=t),inputClass:"col-3",autocomplete:"off",min:1,max:999},null,8,["modelValue"])])]),o("div",Ie,[l(d,{type:"button",label:"Cancelar",severity:"secondary",onClick:e[12]||(e[12]=t=>_.value=!1)}),l(d,{type:"button",label:"Adicionar",onClick:T})])]),_:1},8,["visible"]),l(I,{visible:D.value,"onUpdate:visible":e[15]||(e[15]=t=>D.value=t),style:{width:"450px"},header:"Deletar Item",modal:!0},{footer:i(()=>[l(d,{label:"Não",icon:"pi pi-times",text:"",onClick:e[14]||(e[14]=t=>D.value=!1)}),l(d,{label:"Sim",icon:"pi pi-check",text:"",onClick:s.deleteProduct},null,8,["onClick"])]),default:i(()=>[o("div",qe,[De,u.value?(y(),R("span",Ue,[h("Você tem certeza que quer deletar o Item "),o("b",null,N(u.value.name),1),h(" ?")])):C("",!0)])]),_:1},8,["visible"]),l(I,{header:"Deletar setor?",visible:g.value,"onUpdate:visible":e[17]||(e[17]=t=>g.value=t),style:{width:"400px"},modal:!0,closable:!1},{footer:i(()=>[l(d,{label:"Não",icon:"pi pi-times",onClick:e[16]||(e[16]=t=>g.value=!1),class:"p-button-text"}),l(d,{label:"Sim",icon:"pi pi-check",onClick:O,class:"p-button-text"})]),default:i(()=>[o("div",ze,[Ne,o("span",null,[h("Você tem certeza que deseja deletar o setor "),o("b",null,N(c(a).codigo),1),h(" - "),o("b",null,N(c(a).nome),1),h(" ?")])])]),_:1},8,["visible"])])],32)])])])]),_:1},8,["activeIndex"])]),_:1},8,["activeIndex"])])}}};export{Te as default};
