import{H as I}from"./vue-datepicker-7654ddb0.js";import{_ as T,e as M,s as z,r as s,n as E,g as v,o as h,c as x,d as l,h as r,x as B,a as C,y as U,w as D,l as b,i as L,t as P,p as R,b as H,z as Y}from"./index-8679b923.js";/* empty css             */const c=d=>(R("data-v-9b79925f"),d=d(),H(),d),j={class:"card"},q={class:"form"},G={class:"grid mt-3 mx-1 px-1"},J=c(()=>l("h5",{class:"my-4 text-2xl"},"Fichas Retiradas",-1)),K={key:0,class:"p-0 m-0 p-fluid formgrid grid col-12"},Q={class:"field lg:col-3 md:col-6 sm:col-6"},W=c(()=>l("label",{for:"planta"},"Planta:",-1)),X={class:"field lg:col-3 md:col-6 sm:col-6"},Z=c(()=>l("label",{for:"perfil"},"Funcionário:",-1)),oo={class:"field datepicker lg:col-2 md:col-6 sm:col-6"},eo=c(()=>l("label",{for:"perfil"},"Data Inicial:",-1)),ao={class:"field lg:col-2 md:col-6 sm:col-6"},lo=c(()=>l("label",{for:"perfil"},"Data Final:",-1)),to={class:"field lg:col-2 md:col-6 sm:col-6"},so={__name:"fichasretiradas",setup(d){const i=M();z();const u={label:"Todos",value:null};s([]);const y=s([u]),_=s(null),f=s(null),V=s([u]);s({global:{value:null,matchMode:Y.CONTAINS}});const m=s(!0),k=s([]),e=s({id_planta:"",id_funcionario:"",data_inicio:"",data_final:""}),w=a=>{const o=a.getDate(),t=a.getMonth()+1,p=a.getFullYear();return`${o}/${t}/${p}`},F=async()=>{const a={id_cliente:i.userIdCliente,id_planta:e.value.id_planta===null?void 0:e.value.id_planta,id_funcionario:e.value.id_funcionario===null?void 0:e.value.id_funcionario,data_inicio:toISODate(e.value.data_inicio),data_final:toISODate(e.value.data_final)};try{const o=await b.post("",a,{headers:{Authorization:`Bearer ${i.token}`}});retiradas.value=o.data}catch(o){console.error("Erro ao buscar fichas:",o)}},S=()=>{m.value=!0,k.value={}};s(null);const O=async()=>{const a={id_cliente:i.userIdCliente};try{const o=await b.post("funcionarios/listarplanta",a,{headers:{Authorization:`Bearer ${i.token}`}});V.value=[u,...o.data.map(({id_planta:t})=>({label:`Planta  ${t}`,value:t}))]}catch(o){console.error("Erro ao buscar opções de plantas:",o)}},$=async()=>{const a={id_cliente:i.userIdCliente};try{const o=await b.post("/funcionarios/listar",a,{headers:{Authorization:`Bearer ${i.token}`}});y.value=[u,...o.data.map(t=>({label:t.nome,value:t.id_funcionario}))]}catch(o){console.error("Erro ao carregar usuários:",o)}},A=()=>{var a,o;(a=_.value)!=null&&a.overlayVisible&&_.value.hide(),(o=f.value)!=null&&o.overlayVisible&&f.value.hide()},g=()=>{A()};return E(()=>{O(),$()}),(a,o)=>{const t=v("Dropdown"),p=v("Button"),N=v("Card");return h(),x("div",j,[l("div",q,[l("div",G,[J,m.value?(h(),x("div",K,[l("div",Q,[W,r(t,{class:"drop",modelValue:e.value.id_planta,"onUpdate:modelValue":o[0]||(o[0]=n=>e.value.id_planta=n),options:V.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown1",ref:_},null,8,["modelValue","options"])]),l("div",X,[Z,r(t,{class:"drop",modelValue:e.value.id_funcionario,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value.id_funcionario=n),options:y.value,optionLabel:"label",optionValue:"value",ref_key:"dropdown2",ref:f,placeholder:"Todos"},null,8,["modelValue","options"])]),l("div",oo,[eo,r(B(I),{class:"drop",modelValue:e.value.data_inicio,"onUpdate:modelValue":o[2]||(o[2]=n=>e.value.data_inicio=n),showIcon:"",showOnFocus:!1,format:w,locale:"pt-BR","auto-apply":"","enable-time-picker":!1,onOpen:g,placeholder:"Selecione uma data"},null,8,["modelValue"])]),l("div",ao,[lo,r(B(I),{class:"datepicker",modelValue:e.value.data_final,"onUpdate:modelValue":o[3]||(o[3]=n=>e.value.data_final=n),showIcon:"",showOnFocus:!1,format:w,locale:"pt-BR","auto-apply":"","enable-time-picker":!1,placeholder:"Selecione uma data",onOpen:g},null,8,["modelValue"])]),l("div",to,[r(p,{class:"filtrar",type:"button",label:"Filtrar Dados",icon:"pi pi-search",severity:"info",onClick:F})])])):C("",!0),m.value?C("",!0):(h(),U(N,{key:1},{title:D(()=>[L(P(k.value.dm),1)]),content:D(()=>[r(p,{type:"button",label:"Voltar",icon:"pi pi-check",severity:"info",onClick:S})]),_:1}))])])])}}},co=T(so,[["__scopeId","data-v-9b79925f"]]);export{co as default};
