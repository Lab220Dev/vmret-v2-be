import{_ as M,r as b,e as F,s as K,m as O,B as G,n as H,g as d,o as _,c as x,h as o,w as v,l as I,d as a,k as J,x as n,a as g,y as k,i as P,t as D,p as Q,b as W}from"./index-7529c793.js";const r=V=>(Q("data-v-22c35e1a"),V=V(),W(),V),X={class:"card vh"},Y={class:"col-12"},Z={class:"grid"},ee={class:"col-12"},ae={class:"card"},te={class:"p-fluid formgrid grid m-0 p-0"},le={class:"full lg:col-12 md:col-12 sm:col-12"},oe=r(()=>a("label",{for:"id_planta"},"Código:",-1)),se={class:"full lg:col-12 md:col-12 sm:col-12"},ne=r(()=>a("label",{for:"nome"},"Planta (Nome):",-1)),ie=r(()=>a("label",{class:"mt-3 ml-4",for:"switch1"},"Tem integração?",-1)),de={key:0,class:"card mt-4"},re={key:0,class:"my-3 grid"},ce={class:"full lg:col-6 md:col-6 sm:col-12"},ue=r(()=>a("label",{for:"userid"},"UserID:",-1)),me={class:"full lg:col-6 md:col-6 sm:col-12"},pe=r(()=>a("label",{for:"senha"},"Senha:",-1)),_e={class:"full lg:col-6 md:col-6 sm:col-12"},ve=r(()=>a("label",{for:"urlapi"},"URL:",-1)),fe={class:"full lg:col-6 md:col-6 sm:col-12"},he=r(()=>a("label",{for:"idcliente"},"ID Cliente:",-1)),ye={class:"mr-1 mt-4 grid justify-content-end"},be={class:"confirmation-content"},ge=r(()=>a("i",{class:"pi pi-exclamation-triangle mr-1",style:{"font-size":"2rem"}},null,-1)),Ve={class:""},we={__name:"planta",setup(V){const i=b(0),c=F(),S=K(),C=b([]),u=b(!1),f=b(!1),h=b(!1);let t=O({nome:"",id_planta:"",userId:"",senha:"",urlapi:"",clienteid:""});const q=s=>{t=s.data,i.value=1,u.value=!0,m()},A=()=>{u.value?B():U()},m=async()=>{const s={id_cliente:c.userIdCliente};try{const e=await I.post("/plantas/listar",s,{headers:{Authorization:`Bearer ${c.token}`}});C.value=e.data}catch(e){console.error("Erro ao listar plantas:",e)}},U=async()=>{const s={id_cliente:c.userIdCliente,...t};try{const e=await I.post("/plantas/adicionar",s,{headers:{Authorization:`Bearer ${c.token}`}});m(),i.value=0,w()}catch(e){console.error("Erro ao adicionar planta:",e)}},E=async()=>{let s={id_planta:t.id_planta};try{await I.post("/planta/deletePlanta",s,{headers:{Authorization:`Bearer ${c.token}`}}),S.add({severity:"success",summary:"Successful",detail:"Planta Deletada",life:3e3}),h.value=!1,m(),i.value=0,w()}catch{S.add({severity:"error",summary:"Error",detail:"Erro ao deletar a planta.",life:3e3})}i.value=0},B=async()=>{const s={id_cliente:c.userIdCliente,...t};try{const e=await I.post("/plantas/atualizar",s,{headers:{Authorization:`Bearer ${c.token}`}});m(),i.value=0,w()}catch(e){console.error("Erro ao atualizar Plantas:",e)}};G(i,(s,e)=>{s!==e&&s===0&&(w(),m(),u.value=!1)});const w=()=>{t.nome="",t.id_planta="",t.clienteid="",t.senha="",t.url="",t.userId="",f.value=!1},N=async s=>{await q(s)};return H(()=>{m()}),(s,e)=>{const T=d("Column"),$=d("DataTable"),z=d("TabPanel"),p=d("InputText"),j=d("InputSwitch"),y=d("Button"),R=d("Dialog"),L=d("TabView");return _(),x("div",X,[o(L,{activeIndex:i.value,"onUpdate:activeIndex":e[11]||(e[11]=l=>i.value=l)},{default:v(()=>[o(z,{header:"Listar Plantas"},{default:v(()=>[a("div",Y,[o($,{value:C.value,selectionMode:"single",tableStyle:"min-width: 25%",rowsPerPageOptions:[5,10,20,50],stripedRows:"",dataKey:"id",metaKeySelection:!1,onRowSelect:N},{default:v(()=>[o(T,{field:"id_planta",header:"Planta de Custo"}),o(T,{field:"nome",header:"Planta (Nome)"})]),_:1},8,["value"])])]),_:1}),o(z,{header:"Adicionar Planta",activeIndex:i.value,"onUpdate:activeIndex":e[10]||(e[10]=l=>i.value=l)},{default:v(()=>[a("div",Z,[a("div",ee,[a("div",ae,[a("form",{onSubmit:J(A,["prevent"])},[a("div",te,[a("div",le,[oe,o(p,{class:"my-2",id:"id_planta",modelValue:n(t).id_planta,"onUpdate:modelValue":e[0]||(e[0]=l=>n(t).id_planta=l),required:""},null,8,["modelValue"])]),a("div",se,[ne,o(p,{class:"my-2",id:"nome",modelValue:n(t).nome,"onUpdate:modelValue":e[1]||(e[1]=l=>n(t).nome=l),required:""},null,8,["modelValue"])]),o(j,{class:"grid mt-3 ml-3",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),inputId:"switch1"},null,8,["modelValue"]),ie,f.value?(_(),x("div",de,[f.value?(_(),x("div",re,[a("div",ce,[ue,o(p,{class:"my-2",id:"userid",modelValue:n(t).userId,"onUpdate:modelValue":e[3]||(e[3]=l=>n(t).userId=l),required:""},null,8,["modelValue"])]),a("div",me,[pe,o(p,{class:"my-2",id:"senha",modelValue:n(t).senha,"onUpdate:modelValue":e[4]||(e[4]=l=>n(t).senha=l),required:""},null,8,["modelValue"])]),a("div",_e,[ve,o(p,{class:"my-2",id:"urlapi",modelValue:n(t).urlapi,"onUpdate:modelValue":e[5]||(e[5]=l=>n(t).urlapi=l),required:""},null,8,["modelValue"])]),a("div",fe,[he,o(p,{class:"my-2",id:"idcliente",modelValue:n(t).clienteid,"onUpdate:modelValue":e[6]||(e[6]=l=>n(t).clienteid=l),required:""},null,8,["modelValue"])])])):g("",!0)])):g("",!0)]),a("div",ye,[u.value?(_(),k(y,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Atualizar",icon:"pi pi-refresh",severity:"primary",onClick:B})):g("",!0),u.value?(_(),k(y,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Excluir",icon:"pi pi-trash",severity:"danger",onClick:e[7]||(e[7]=l=>h.value=!0)})):g("",!0),u.value?g("",!0):(_(),k(y,{key:2,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:U}))])],32)]),o(R,{header:"Deletar Planta",visible:h.value,"onUpdate:visible":e[9]||(e[9]=l=>h.value=l),style:{width:"400px"},modal:!0,closable:!1},{footer:v(()=>[o(y,{label:"Não",icon:"pi pi-times",onClick:e[8]||(e[8]=l=>h.value=!1),class:"p-button-text"}),o(y,{label:"Sim",icon:"pi pi-check",onClick:E,class:"p-button-text"})]),default:v(()=>[a("div",be,[ge,a("span",Ve,[P(" Você tem certeza que deseja deletar essa planta? "),a("b",null,D(n(t).id_planta),1),P(" - "),a("b",null,D(n(t).nome),1),P(" ?")])])]),_:1},8,["visible"])])])]),_:1},8,["activeIndex"])]),_:1},8,["activeIndex"])])}}},xe=M(we,[["__scopeId","data-v-22c35e1a"]]);export{xe as default};
