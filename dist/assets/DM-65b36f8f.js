import{m as $,r as n,e as E,q as j,C as F,s as L,l as O,g as d,o as y,c as R,d as l,h as t,w as m,z as V,a as b,S as K,i as q,t as x}from"./index-b8796d24.js";import{L as H}from"./LoadingSpinner-5e082fdb.js";const W={class:"grid h-full"},Y={class:"col-12"},G={class:"card"},J=l("h5",{class:"mt-2"},"Dispenser Machines",-1),Q={class:"col-12"},X={class:"mt-2"},Z={class:"mt-5 mx-0 p-fluid grid"},ee={class:"full lg:col-12 md:col-12 sm:col-12"},le=l("label",{for:"name"},"Cliente:",-1),oe={class:"full lg:col-6 md:col-9 sm:col-12"},te=l("label",{for:"email"},"Numero da DM:",-1),ae={class:"full lg:col-6 md:col-9 sm:col-12"},se=l("label",{for:"email"},"Identificação da DM:",-1),ie={class:"full lg:col-12 md:col-4 sm:col-12"},ne=l("label",{class:"mt-3 ml-4",for:"switch2"},"DM Ativo?",-1),de=l("h5",{class:"mt-2"},"Opções de DM",-1),ce={class:"mt-5 mx-0 p-fluid grid"},re=l("label",{for:"fim"},null,-1),me={id:"fim",class:"checkbox-container flex align-content-end flex-wrap"},ue={class:"checkbox-items m-2 flex align-items-end"},he=l("label",{for:"Voucher",class:"ml-2"}," Voucher ",-1),pe={class:"checkbox-items m-2 flex align-items-center"},fe=l("label",{for:"cracha",class:"ml-2"}," Crachá ",-1),_e={class:"checkbox-items m-2 flex align-items-center"},ve=l("label",{for:"Biometria",class:"ml-2"}," Biometria ",-1),ye={class:"checkbox-items m-2 flex align-items-center"},Ve=l("label",{for:"Facial",class:"ml-2"}," Rec. Facial ",-1),be={class:"full lg:col-12 md:col-4 sm:col-12"},ge=l("label",{class:"mt-3 ml-4",for:"switch3"},"Usa Mob?",-1),we={class:"full lg:col-6 md:col-6 sm:col-12"},De=l("label",{for:"senha"},"UserID API:",-1),Me={class:"full lg:col-6 md:col-6 sm:col-12"},xe=l("label",{for:"senha"},"Senha API:",-1),Ce={class:"full lg:col-6 md:col-6 sm:col-12"},Se=l("label",{for:"senha"},"IdCliente API:",-1),ke={class:"full lg:col-6 md:col-6 sm:col-6"},Ie=l("label",{for:"codigo"},"Senha Chave:",-1),Ue={class:"flex align-items-center justify-content-end field col-12"},Te=l("h5",{class:"mt-2"},"Controladoras",-1),Ae={class:"mt-5 mx-0 p-fluid grid"},Be={class:"col-12"},ze={class:"flex align-items-center justify-content-end field col-12"},je={__name:"DM",setup(Ne){const g=$(),u=n(0),w=E(),C=n(!1),a=j({nome:"",usuario:"",senha:""}),h=n(!1);n([{name:"Ativo",code:"ativo"},{name:"Inativo",code:"inativo"}]),n();const D=n([]),S=n([{nome:"DM 1",code:"plt1"},{nome:"DM 2",code:"plt2"},{nome:"DM 3",code:"plt3"},{nome:"DM 4",code:"plt4"},{nome:"DM 5",code:"plt5"},{nome:"DM 6",code:"plt6"},{nome:"DM 7",code:"plt7"},{nome:"DM 8",code:"plt8"}]),k=n([]),M={label:"Todos",value:null},I=n([M]),U=()=>{g.add({severity:"success",summary:"Successful",detail:"Usuario WEB criado",life:3e3})},T=()=>{g.add({severity:"success",summary:"Successful",detail:"Maquinas Salvas para o Usuario",life:3e3})},A=i=>{show.value=!0,a.value=i.data},B=i=>{if(!i)return"";try{const e=new Date(i);if(isNaN(e))throw new Error("Data inválida");const s=new Date(e.getTime()+e.getTimezoneOffset()*6e4),c=String(s.getDate()).padStart(2,"0"),p=String(s.getMonth()+1).padStart(2,"0"),f=s.getFullYear(),r=String(s.getHours()).padStart(2,"0"),_=String(s.getMinutes()).padStart(2,"0");return`${c}/${p}/${f} ${r}:${_}`}catch(e){return console.error("Erro ao formatar data:",e),"Data inválida"}};F(u,(i,e)=>{i!==e&&i===0&&(fetchUsuarios(),h.value=!1)}),L(()=>{z()});const z=async()=>{const i={id_cliente:w.userIdCliente};try{const e=await O.post("/usuarios/listarPlanta",i,{headers:{Authorization:`Bearer ${w.token}`}});I.value=[M,...e.data.map(({id_planta:s})=>({label:`Planta  ${s}`,value:s}))]}catch(e){console.error("Erro ao buscar opções de plantas:",e)}};return(i,e)=>{const s=d("Column"),c=d("Button"),p=d("DataTable"),f=d("TabPanel"),r=d("InputText"),_=d("InputSwitch"),v=d("Checkbox"),N=d("Textarea"),P=d("TabView");return y(),R("div",W,[l("div",Y,[l("div",G,[J,t(P,{activeIndex:u.value,"onUpdate:activeIndex":e[15]||(e[15]=o=>u.value=o)},{default:m(()=>[t(f,{header:"Listar Dispenser Machines"},{default:m(()=>[l("div",Q,[t(p,{value:k.value,selectionMode:"single",tableStyle:"min-width: 25%",rowsPerPageOptions:[5,10,20,50],stripedRows:"",dataKey:"id",metaKeySelection:!1,onRowSelect:A,paginator:"",rows:10},{default:m(()=>[t(s,{field:"id_DM",header:"Id"}),t(s,{field:"nome",header:"Número"}),t(s,{field:"email",header:"Identificação"}),t(s,{field:"role",header:"Cliente"}),t(s,{field:"role",header:"Localização"}),t(s,{field:"ativo",header:"Ativo"},{body:m(({data:o})=>[l("i",{class:K(["pi",{"pi-check-circle text-green-500 ":o.ativo,"pi-times-circle text-red-500":!o.ativo}])},null,2)]),_:1}),t(s,{field:"atualizado",header:"Atualizado"},{body:m(({data:o})=>[q(x(B(new Date(o.last_login))),1)]),_:1}),t(s,{style:{"min-width":"8rem"}},{body:m(o=>[t(c,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:Pe=>i.deleteUsuario(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])]),_:1}),t(f,{header:"Adicionar Dispenser Machines"},{default:m(()=>[l("h5",X,x(h.value?"Editar ":"Nova ")+"Dispenser Machines",1),l("div",Z,[l("div",ee,[le,t(r,{class:"my-2",modelValue:a.nome,"onUpdate:modelValue":e[0]||(e[0]=o=>a.nome=o),id:"name",type:"text"},null,8,["modelValue"])]),l("div",oe,[te,t(r,{class:"my-2",modelValue:a.usuario,"onUpdate:modelValue":e[1]||(e[1]=o=>a.usuario=o),id:"email"},null,8,["modelValue"])]),l("div",ae,[se,t(r,{class:"my-2",modelValue:a.usuario,"onUpdate:modelValue":e[2]||(e[2]=o=>a.usuario=o),id:"email"},null,8,["modelValue"])]),l("div",ie,[ne,t(_,{class:"grid mt-3 ml-3",modelValue:a.status,"onUpdate:modelValue":e[3]||(e[3]=o=>a.status=o),inputId:"switch2"},null,8,["modelValue"])])]),de,l("div",ce,[re,l("div",me,[l("div",ue,[t(v,{modelValue:a.voucher,"onUpdate:modelValue":e[4]||(e[4]=o=>a.voucher=o),inputId:"Voucher",value:"Voucher",binary:!0},null,8,["modelValue"]),he]),l("div",pe,[t(v,{modelValue:a.cracha,"onUpdate:modelValue":e[5]||(e[5]=o=>a.cracha=o),inputId:"cracha",value:"cracha",binary:!0},null,8,["modelValue"]),fe]),l("div",_e,[t(v,{modelValue:a.biometria,"onUpdate:modelValue":e[6]||(e[6]=o=>a.biometria=o),inputId:"Biometria",value:"Biometria",binary:!0},null,8,["modelValue"]),ve]),l("div",ye,[t(v,{modelValue:a.facial,"onUpdate:modelValue":e[7]||(e[7]=o=>a.facial=o),inputId:"Facial",value:"Facial",binary:!0},null,8,["modelValue"]),Ve])]),l("div",be,[ge,t(_,{class:"grid mt-3 ml-3",modelValue:a.Mob,"onUpdate:modelValue":e[8]||(e[8]=o=>a.Mob=o),inputId:"switch3"},null,8,["modelValue"])]),l("div",we,[De,t(r,{class:"my-2",id:"senha",modelValue:a.senha,"onUpdate:modelValue":e[9]||(e[9]=o=>a.senha=o),type:"password"},null,8,["modelValue"])]),l("div",Me,[xe,t(r,{class:"my-2",id:"senha",modelValue:a.senha,"onUpdate:modelValue":e[10]||(e[10]=o=>a.senha=o),type:"password"},null,8,["modelValue"])]),l("div",Ce,[Se,t(r,{class:"my-2",id:"senha",modelValue:a.senha,"onUpdate:modelValue":e[11]||(e[11]=o=>a.senha=o),type:"password"},null,8,["modelValue"])]),l("div",ke,[Ie,t(N,{modelValue:a.textoretirada,"onUpdate:modelValue":e[12]||(e[12]=o=>a.textoretirada=o),class:"my-2 overflow-scroll",rows:"5",cols:"30"},null,8,["modelValue"])]),l("div",Ue,[t(c,{label:"Salvar",icon:"pi pi-check",severity:"info",onClick:U,class:"m-2"})])]),Te,l("div",Ae,[t(c,{label:"Adicionar Controladoras",icon:"pi pi-check",severity:"info",onClick:i.adicionarDM,class:"full mt-4 mr-2"},null,8,["onClick"])]),l("div",Be,[t(p,{selection:D.value,"onUpdate:selection":e[13]||(e[13]=o=>D.value=o),value:S.value,dataKey:"code",tableStyle:"width:100% min-width: 50rem",size:i.small},{default:m(()=>[t(s,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(s,{field:"code",header:"Code",class:"col-12 md:col-6",style:{width:"30%"}}),t(s,{field:"nome",header:"Name",class:"col-12 md:col-6",style:{width:"70%"}})]),_:1},8,["selection","value","size"]),l("div",ze,[h.value?(y(),V(c,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Atualizar",icon:"pi pi-refresh",severity:"primary",onClick:T})):b("",!0),t(c,{style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Voltar",icon:"pi pi-trash",severity:"primary",onClick:e[14]||(e[14]=o=>u.value=0)}),h.value?b("",!0):(y(),V(c,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:i.adicionarCliente},null,8,["onClick"]))])])]),_:1})]),_:1},8,["activeIndex"]),C.value?(y(),V(H,{key:0})):b("",!0)])])])}}};export{je as default};
