import{_ as F,r as y,e as K,m as O,q as G,C as H,s as J,g as r,o as m,c as S,h as o,w as p,z as k,a as h,l as x,d as a,i as P,k as Q,y as n,t as q,p as W,b as X}from"./index-cbac5dd2.js";import{L as Y}from"./LoadingSpinner-007dd4da.js";/* empty css                                                       */const c=w=>(W("data-v-4d137200"),w=w(),X(),w),Z={class:"card vh"},ee={class:"col-12"},ae={class:"grid"},te={class:"col-12"},le={class:"card"},oe={class:"p-fluid formgrid grid m-0 p-0"},se={class:"full lg:col-12 md:col-12 sm:col-12"},ne=c(()=>a("label",{for:"id_planta"},"Código:",-1)),ie={class:"full lg:col-12 md:col-12 sm:col-12"},de=c(()=>a("label",{for:"nome"},"Planta (Nome):",-1)),re=c(()=>a("label",{class:"mt-3 ml-4",for:"switch1"},"Tem integração?",-1)),ce={key:0,class:"card mt-4"},ue={key:0,class:"my-3 grid"},me={class:"full lg:col-6 md:col-6 sm:col-12"},pe=c(()=>a("label",{for:"userid"},"UserID:",-1)),ve={class:"full lg:col-6 md:col-6 sm:col-12"},_e=c(()=>a("label",{for:"senha"},"Senha:",-1)),fe={class:"full lg:col-6 md:col-6 sm:col-12"},ye=c(()=>a("label",{for:"urlapi"},"URL:",-1)),he={class:"full lg:col-6 md:col-6 sm:col-12"},ge=c(()=>a("label",{for:"idcliente"},"ID Cliente:",-1)),be={class:"mr-1 mt-4 grid justify-content-end"},Ve={class:"confirmation-content"},we=c(()=>a("i",{class:"pi pi-exclamation-triangle mr-1",style:{"font-size":"2rem"}},null,-1)),Ie={class:""},ke={__name:"planta",setup(w){const i=y(0),u=K(),C=O(),U=y([]),v=y(!1),g=y(!1),b=y(!1),d=y(!1);let t=G({nome:"",id_planta:"",userId:"",senha:"",urlapi:"",clienteid:""});const N=s=>{t=s.data,i.value=1,v.value=!0,_()},E=()=>{v.value?z():T()},_=async()=>{const s={id_cliente:u.userIdCliente};d.value=!0;try{const e=await x.post("/plantas/listar",s,{headers:{Authorization:`Bearer ${u.token}`}});U.value=e.data}catch(e){console.error("Erro ao listar plantas:",e)}finally{d.value=!1}},T=async()=>{const s={id_cliente:u.userIdCliente,...t};d.value=!0;try{const e=await x.post("/plantas/adicionar",s,{headers:{Authorization:`Bearer ${u.token}`}});_(),i.value=0,I()}catch(e){console.error("Erro ao adicionar planta:",e)}finally{d.value=!1}},A=async()=>{let s={id_planta:t.id_planta};d.value=!0;try{await x.post("/planta/deletePlanta",s,{headers:{Authorization:`Bearer ${u.token}`}}),C.add({severity:"success",summary:"Successful",detail:"Planta Deletada",life:3e3}),b.value=!1,_(),i.value=0,I()}catch{C.add({severity:"error",summary:"Error",detail:"Erro ao deletar a planta.",life:3e3})}finally{d.value=!1}i.value=0},z=async()=>{const s={id_cliente:u.userIdCliente,...t};d.value=!0;try{const e=await x.post("/plantas/atualizar",s,{headers:{Authorization:`Bearer ${u.token}`}});_(),i.value=0,I()}catch(e){console.error("Erro ao atualizar Plantas:",e)}finally{d.value=!1}};H(i,(s,e)=>{s!==e&&s===0&&(I(),_(),v.value=!1)});const I=()=>{t.nome="",t.id_planta="",t.clienteid="",t.senha="",t.url="",t.userId="",g.value=!1},$=async s=>{await N(s)};return J(()=>{_()}),(s,e)=>{const B=r("Column"),j=r("DataTable"),D=r("TabPanel"),f=r("InputText"),L=r("InputSwitch"),V=r("Button"),R=r("Dialog"),M=r("TabView");return m(),S("div",Z,[o(M,{activeIndex:i.value,"onUpdate:activeIndex":e[11]||(e[11]=l=>i.value=l)},{default:p(()=>[o(D,{header:"Listar Plantas"},{default:p(()=>[a("div",ee,[o(j,{value:U.value,selectionMode:"single",tableStyle:"min-width: 25%",rowsPerPageOptions:[5,10,20,50],stripedRows:"",dataKey:"id",metaKeySelection:!1,onRowSelect:$},{empty:p(()=>[P(" Nenhuma Planta adicionada. ")]),default:p(()=>[o(B,{field:"id_planta",header:"Planta de Custo"}),o(B,{field:"nome",header:"Planta (Nome)"})]),_:1},8,["value"])])]),_:1}),o(D,{header:"Adicionar Planta",activeIndex:i.value,"onUpdate:activeIndex":e[10]||(e[10]=l=>i.value=l)},{default:p(()=>[a("div",ae,[a("div",te,[a("div",le,[a("form",{onSubmit:Q(E,["prevent"])},[a("div",oe,[a("div",se,[ne,o(f,{class:"my-2",id:"id_planta",modelValue:n(t).codigo,"onUpdate:modelValue":e[0]||(e[0]=l=>n(t).codigo=l),required:""},null,8,["modelValue"])]),a("div",ie,[de,o(f,{class:"my-2",id:"nome",modelValue:n(t).nome,"onUpdate:modelValue":e[1]||(e[1]=l=>n(t).nome=l),required:""},null,8,["modelValue"])]),o(L,{class:"grid mt-3 ml-3",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l),inputId:"switch1"},null,8,["modelValue"]),re,g.value?(m(),S("div",ce,[g.value?(m(),S("div",ue,[a("div",me,[pe,o(f,{class:"my-2",id:"userid",modelValue:n(t).userId,"onUpdate:modelValue":e[3]||(e[3]=l=>n(t).userId=l),required:""},null,8,["modelValue"])]),a("div",ve,[_e,o(f,{class:"my-2",id:"senha",modelValue:n(t).senha,"onUpdate:modelValue":e[4]||(e[4]=l=>n(t).senha=l),required:""},null,8,["modelValue"])]),a("div",fe,[ye,o(f,{class:"my-2",id:"urlapi",modelValue:n(t).urlapi,"onUpdate:modelValue":e[5]||(e[5]=l=>n(t).urlapi=l),required:""},null,8,["modelValue"])]),a("div",he,[ge,o(f,{class:"my-2",id:"idcliente",modelValue:n(t).clienteid,"onUpdate:modelValue":e[6]||(e[6]=l=>n(t).clienteid=l),required:""},null,8,["modelValue"])])])):h("",!0)])):h("",!0)]),a("div",be,[v.value?(m(),k(V,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"primary",onClick:z})):h("",!0),v.value?(m(),k(V,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Excluir",icon:"pi pi-trash",severity:"danger",onClick:e[7]||(e[7]=l=>b.value=!0)})):h("",!0),v.value?h("",!0):(m(),k(V,{key:2,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:T}))])],32)]),o(R,{header:"Deletar Planta",visible:b.value,"onUpdate:visible":e[9]||(e[9]=l=>b.value=l),style:{width:"400px"},modal:!0,closable:!1},{footer:p(()=>[o(V,{label:"Não",icon:"pi pi-times",onClick:e[8]||(e[8]=l=>b.value=!1),class:"p-button-text"}),o(V,{label:"Sim",icon:"pi pi-check",onClick:A,class:"p-button-text"})]),default:p(()=>[a("div",Ve,[we,a("span",Ie,[P(" Você tem certeza que deseja deletar essa planta? "),a("b",null,q(n(t).id_planta),1),P(" - "),a("b",null,q(n(t).nome),1),P(" ?")])])]),_:1},8,["visible"])])])]),_:1},8,["activeIndex"])]),_:1},8,["activeIndex"]),d.value?(m(),k(Y,{key:0})):h("",!0)])}}},Ce=F(ke,[["__scopeId","data-v-4d137200"]]);export{Ce as default};
