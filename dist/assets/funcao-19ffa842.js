import{r as p,e as U,m as $,q,C as R,s as M,g as r,o as y,c as K,h as n,w as m,l as h,d as t,k as L,y as i,z as w,a as x,i as C,t as z}from"./index-aaf86b94.js";const P={class:"card vh"},G={class:"col-12"},H={class:"grid"},J={class:"col-12"},O={class:"card"},Q={class:"p-fluid formgrid grid m-0 p-0"},W={class:"full lg:col-12 md:col-12 sm:col-12"},X=t("label",{for:"id_funcao"},"Código da Função:",-1),Y={class:"full lg:col-12 md:col-12 sm:col-12"},Z=t("label",{for:"nome"},"Função (Nome):",-1),ee={class:"full lg:col-12 md:col-12 sm:col-12"},te=t("label",{for:"id_centro_custo"},"Centro de Custo (Nome):",-1),oe={class:"mr-1 mt-4 grid justify-content-end"},ae=t("div",{class:"mr-1 mt-7 grid justify-content-end flex-wrap"},null,-1),se={class:"confirmation-content"},ne=t("i",{class:"pi pi-exclamation-triangle mr-1",style:{"font-size":"2rem"}},null,-1),le={class:""},re={__name:"funcao",setup(ie){const l=p(0),c=U(),k=$(),F=p([]),d=p(!1),_=p(!1);let a=q({id_funcao:"",nome:"",id_centro_custo:""});const B=o=>{a=o.data,d.value=!0,l.value=1,u()},I=()=>{d.value?S():V()},u=async()=>{const o={id_cliente:c.userIdCliente};try{const e=await h.post("/funcao/listar",o,{headers:{Authorization:`Bearer ${c.token}`}});F.value=e.data}catch(e){console.error("Erro ao listar Funções e Diretorias:",e)}},V=async()=>{const o={id_cliente:c.userIdCliente,...a};try{const e=await h.post("/funcao/adicionar",o,{headers:{Authorization:`Bearer ${c.token}`}});u(),l.value=0,v()}catch(e){console.error("Erro ao adicionar Funções e Diretorias:",e)}},T=async()=>{let o={id_centro_custo:cdc.id_centro_custo};try{await h.post("/funcao/deleteFuncao",o,{headers:{Authorization:`Bearer ${c.token}`}}),k.add({severity:"success",summary:"Successful",detail:"Função Deletada",life:3e3}),_.value=!1,u(),l.value=0,v()}catch{k.add({severity:"error",summary:"Error",detail:"Erro ao deletar a função",life:3e3})}l.value=0},S=async()=>{const o={id_cliente:c.userIdCliente,...a};try{const e=await h.post("/funcao/atualizar",o,{headers:{Authorization:`Bearer ${c.token}`}});u(),l.value=0,v()}catch(e){console.error("Erro ao atualizar Funções e Diretorias:",e)}};R(l,(o,e)=>{o!==e&&o===0&&(v(),u(),d.value=!1)});const v=()=>{a.id_funcao="",a.nome="",a.id_centro_custo=""},N=async o=>{await B(o)};return M(()=>{u()}),(o,e)=>{const b=r("Column"),E=r("DataTable"),D=r("TabPanel"),g=r("InputText"),f=r("Button"),j=r("Dialog"),A=r("TabView");return y(),K("div",P,[n(A,{activeIndex:l.value,"onUpdate:activeIndex":e[7]||(e[7]=s=>l.value=s)},{default:m(()=>[n(D,{header:"Listar Funções"},{default:m(()=>[t("div",G,[n(E,{value:F.value,selectionMode:"single",tableStyle:"min-width: 25%",stripedRows:"",dataKey:"id",metaKeySelection:!1,onRowSelect:N},{default:m(()=>[n(b,{field:"id_funcao",header:"Código"}),n(b,{field:"nome",header:"Função (Nome)"}),n(b,{field:"id_centro_custo",header:"Centro de Custo (Nome)"})]),_:1},8,["value"])])]),_:1}),n(D,{header:"Adicionar Função",activeIndex:l.value,"onUpdate:activeIndex":e[6]||(e[6]=s=>l.value=s)},{default:m(()=>[t("div",H,[t("div",J,[t("div",O,[t("form",{onSubmit:L(I,["prevent"])},[t("div",Q,[t("div",W,[X,n(g,{class:"my-2",id:"id_funcao",modelValue:i(a).id_funcao,"onUpdate:modelValue":e[0]||(e[0]=s=>i(a).id_funcao=s),required:""},null,8,["modelValue"])]),t("div",Y,[Z,n(g,{class:"my-2",id:"nome",modelValue:i(a).nome,"onUpdate:modelValue":e[1]||(e[1]=s=>i(a).nome=s),required:""},null,8,["modelValue"])]),t("div",ee,[te,n(g,{class:"my-2",id:"id_centro_custo",modelValue:i(a).id_centro_custo,"onUpdate:modelValue":e[2]||(e[2]=s=>i(a).id_centro_custo=s),required:""},null,8,["modelValue"])])]),t("div",oe,[d.value?(y(),w(f,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"primary",onClick:S})):x("",!0),d.value?(y(),w(f,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Excluir",icon:"pi pi-trash",severity:"danger",onClick:e[3]||(e[3]=s=>_.value=!0)})):x("",!0),d.value?x("",!0):(y(),w(f,{key:2,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:V}))])],32)]),ae,n(j,{header:"Deletar Função",visible:_.value,"onUpdate:visible":e[5]||(e[5]=s=>_.value=s),style:{width:"400px"},modal:!0,closable:!1},{footer:m(()=>[n(f,{label:"Não",icon:"pi pi-times",onClick:e[4]||(e[4]=s=>_.value=!1),class:"p-button-text"}),n(f,{label:"Sim",icon:"pi pi-check",onClick:T,class:"p-button-text"})]),default:m(()=>[t("div",se,[ne,t("span",le,[C(" Você tem certeza que deseja deletar essa função? "),t("b",null,z(i(a).id_funcao),1),C(" - "),t("b",null,z(i(a).nome),1),C(" ?")])])]),_:1},8,["visible"])])])]),_:1},8,["activeIndex"])]),_:1},8,["activeIndex"])])}}};export{re as default};
