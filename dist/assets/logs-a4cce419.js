import{H as b}from"./vue-datepicker-59892931.js";import{e as B,m as M,r as t,s as T,g as f,o as $,c as C,d as a,h as n,y as g,w as L,l as v}from"./index-539dbcb2.js";/* empty css             */import"./format-7e97a1d1.js";const x={class:"card vh p-fluid formgrid"},I={class:"form"},A=a("h5",{class:"my-4 text-2xl"},"Log",-1),E={class:"grid mt-3 mx-1 p-1"},S={class:"field lg:col-4 md:col-6 sm:col-6"},z=a("label",{for:"dm"},"DM:",-1),R={class:"field lg:col-4 md:col-6 sm:col-6"},H=a("label",{for:"usuario"},"Usuário:",-1),N={class:"field lg:col-4 md:col-6 sm:col-6"},P=a("label",{for:"funcionario"},"Funcionário:",-1),G={class:"field lg:col-4 md:col-6 sm:col-6"},K=a("label",{for:"operacao"},"Operação:",-1),Y={class:"field lg:col-4 md:col-6 sm:col-6"},j=a("label",{for:"perfil"},"Data Inicial:",-1),q={class:"field lg:col-4 md:col-6 sm:col-6"},J=a("label",{for:"perfil"},"Data Final:",-1),eo={__name:"logs",setup(Q){const d=B();M();const u=t(null),p=t(null),m=t(null);t(null);const _={label:"Todos",value:null};t([]);const c=t([_]),w=t([_]),y=t([]);t(!0),t([]);const s=t({dm:"",id_usuario:"",id_funcionario:"",id_operacao:"",data_inicio:"",data_final:""}),h=l=>{const o=l.getDate(),e=l.getMonth()+1,i=l.getFullYear();return`${o}/${e}/${i}`};t(null);const D=async()=>{const l={id_cliente:d.userIdCliente};try{const o=await v.get("",{params:l,headers:{Authorization:`Bearer ${d.token}`}});c.value=[_,...o.data.map(({id_dm:e})=>({label:`DM  ${e}`,value:e}))]}catch(o){console.error("Erro ao carregar lista de dms:",o)}},k=async()=>{const l={id_cliente:d.userIdCliente};try{const o=await v.get("",{user:l,headers:{Authorization:`Bearer ${d.token}`}});c.value=o.data.map(({id_usuario:e})=>({label:`Usuario  ${e}`,value:e}))}catch(o){console.error("Erro ao carregar lista de usuários:",o)}},U=async()=>{const l={id_cliente:d.userIdCliente};try{const o=await v.post("/funcionarios/listar",l,{headers:{Authorization:`Bearer ${d.token}`}});ListaFuncionarios.value=o.data.map(e=>({label:e.nome,value:e.id_funcionario}))}catch(o){console.error("Erro ao carregar usuários:",o)}},F=()=>{var l,o,e;(l=u.value)!=null&&l.overlayVisible&&u.value.hide(),(o=p.value)!=null&&o.overlayVisible&&p.value.hide(),(e=m.value)!=null&&e.overlayVisible&&m.value.hide()},V=()=>{F()};return T(()=>{D(),k(),U()}),(l,o)=>{const e=f("Dropdown"),i=f("Column"),O=f("DataTable");return $(),C("div",x,[a("div",I,[A,a("div",E,[a("div",S,[z,n(e,{class:"drop",modelValue:s.value.dm,"onUpdate:modelValue":o[0]||(o[0]=r=>s.value.dm=r),options:c.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown1",ref:u},null,8,["modelValue","options"])]),a("div",R,[H,n(e,{class:"drop",modelValue:s.value.id_planta,"onUpdate:modelValue":o[1]||(o[1]=r=>s.value.id_planta=r),options:y.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown3",ref:m},null,8,["modelValue","options"])]),a("div",N,[P,n(e,{class:"drop",modelValue:s.value.id_funcionario,"onUpdate:modelValue":o[2]||(o[2]=r=>s.value.id_funcionario=r),options:l.ListaFuncionarios,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown2",ref:p},null,8,["modelValue","options"])]),a("div",G,[K,n(e,{class:"drop",modelValue:s.value.id_operacao,"onUpdate:modelValue":o[3]||(o[3]=r=>s.value.id_operacao=r),options:w.value,optionLabel:"label",optionValue:"value",placeholder:"Todos"},null,8,["modelValue","options"])]),a("div",Y,[j,n(g(b),{class:"drop",modelValue:s.value.data_inicio,"onUpdate:modelValue":o[4]||(o[4]=r=>s.value.data_inicio=r),showIcon:"",showOnFocus:!1,format:h,locale:"pt-BR",onOpen:V,"enable-time-picker":!1,placeholder:"Selecione uma data inicial"},null,8,["modelValue"])]),a("div",q,[J,n(g(b),{class:"drop",modelValue:s.value.data_final,"onUpdate:modelValue":o[5]||(o[5]=r=>s.value.data_final=r),showIcon:"",showOnFocus:!1,format:h,locale:"pt-BR",onOpen:V,"enable-time-picker":!1,placeholder:"Selecione uma data final"},null,8,["modelValue"])])])]),n(O,{value:c.value,stripedRows:"",showGridlines:"",paginator:"",rows:10,dataKey:"DM",rowsPerPageOptions:[5,10,20,50],tableStyle:{width:"100%"}},{default:L(()=>[n(i,{field:"DM",header:"DM"}),n(i,{field:"Data",header:"Data"}),n(i,{field:"usuario",header:"Usuário"}),n(i,{field:"funcionario",header:"Funcionário"}),n(i,{field:"operacao",header:"Operação"})]),_:1},8,["value"])])}}};export{eo as default};
