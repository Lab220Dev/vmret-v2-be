import{H as V}from"./vue-datepicker-7e67691e.js";/* empty css             *//* empty css                                                       */import{e as x,r as t,s as S,l as f,C as k,g as u,o as C,c as A,d as h,h as n,y as B,w as v,i as $,t as O}from"./index-7226cd4f.js";import"./format-7e97a1d1.js";const N={class:"card vh p-fluid formgrid"},R=h("h5",{class:"my-4 text-2xl"},"Status DM",-1),T={class:"flex mt-3 flex-row gap-3 mb-5"},K={__name:"statusdm",setup(E){const r=x(),o=t({id_dm:"",dia:new Date}),m=t("Ainda nÃ£o foi feita nenhuma busca"),p={label:"Todos",value:null};t(!1);const _=t([p]);t([]),t("");const d=t([]),i=t(null);S(()=>{w()});const w=async()=>{const a={id_cliente:r.userIdCliente};try{const e=await f.post("/relatorioRetiRe/listardm",a,{headers:{Authorization:`Bearer ${r.token}`}});_.value=[p,...e.data.map(({ID_DM:l,Identificacao:s})=>({label:`DM  ${s}`,value:l}))]}catch(e){console.error("Erro ao carregar lista de dms:",e)}},D=async()=>{if(o.id_dm||o.dia){const a={id_cliente:r.userIdCliente};try{const e=await f.post("/SDM/relatorio",a,{headers:{Authorization:`Bearer ${r.token}`}});d.value=e.data,d.value.length===0&&(m.value="Nenhum dado encontrado. Por favor, verifique sua consulta.")}catch(e){console.error("Erro ao carregar lista de dms:",e)}}},y=a=>{const e=a.getDate(),l=a.getMonth()+1,s=a.getFullYear();return`${e}/${l}/${s}`};k([()=>o.value.id_dm,()=>o.value.dia],()=>{D()});const g=()=>{var a;(a=i.value)!=null&&a.overlayVisible&&i.value.hide()},b=()=>{g()};return(a,e)=>{const l=u("Dropdown"),s=u("Column"),M=u("DataTable");return C(),A("div",N,[R,h("div",T,[n(l,{id:"dm",modelValue:o.value.id_dm,"onUpdate:modelValue":e[0]||(e[0]=c=>o.value.id_dm=c),options:_.value,optionLabel:"label",optionValue:"value",placeholder:"Selecione uma DM",class:"mr-3 w-full md:w-14rem",ref_key:"dropdown1",ref:i},null,8,["modelValue","options"]),n(B(V),{class:"drop w-full md:w-14rem",modelValue:o.value.dia,"onUpdate:modelValue":e[1]||(e[1]=c=>o.value.dia=c),showIcon:"",showOnFocus:!1,format:y,locale:"pt-BR","auto-apply":"","enable-time-picker":!1,placeholder:"Selecione uma data",teleport:"body",onOpen:b},null,8,["modelValue"])]),n(M,{value:d.value,stripedRows:"",showGridlines:"",paginator:"",rows:10,dataKey:"DM",rowsPerPageOptions:[5,10,20,50],tableStyle:{width:"100%"}},{empty:v(()=>[$(O(m.value),1)]),default:v(()=>[n(s,{field:"DM",header:"DM"}),n(s,{field:"Data",header:"Data"})]),_:1},8,["value"])])}}};export{K as default};
