import{H as O}from"./vue-datepicker-7654ddb0.js";import{e as Z,r,n as ee,g as u,o as C,c as z,d as a,h as n,x as E,a as N,w as _,y as oe,l as v,i as P,t as le,z as ae}from"./index-8679b923.js";/* empty css             */const te={class:"card vh"},ne={class:"form"},se={class:"grid mt-3 mx-1 px-1"},re=a("h5",{class:"my-4 text-2xl"},"Retiradas Avulsas",-1),ie={key:0,class:"p-0 m-0 p-fluid formgrid grid col-12"},de={class:"field lg:col-3 md:col-6 sm:col-6"},ce=a("label",{for:"dm"},"DM:",-1),ue={class:"field lg:col-3 md:col-6 sm:col-6"},pe=a("label",{for:"planta"},"Planta:",-1),_e={class:"field lg:col-3 md:col-6 sm:col-6"},ve=a("label",{for:"perfil"},"Setor:",-1),me={class:"field lg:col-3 md:col-6 sm:col-6"},fe=a("label",{for:"perfil"},"Centro de Custo:",-1),he={class:"field lg:col-3 md:col-6 sm:col-6"},be=a("label",{for:"perfil"},"Funcionário:",-1),Ve={class:"field lg:col-3 md:col-6 sm:col-6"},ye=a("label",{for:"perfil"},"Voucher:",-1),we={class:"field lg:col-2 md:col-6 sm:col-6"},ge=a("label",{for:"perfil"},"Data Inicial:",-1),ke={class:"field lg:col-2 md:col-6 sm:col-6"},De=a("label",{for:"perfil"},"Data Final:",-1),Ie={class:"field lg:col-2 md:col-6 sm:col-6 justify-self-end"},Ce={class:"datatable-wrapper"},Be={class:"flex justify-content-end"},xe=a("i",{class:"pi pi-search"},null,-1),Ae={__name:"retiradasavulsas",setup(Fe){const i=Z(),B=r([]),b=r(null),V=r(null),y=r(null),w=r(null),g=r(null),k=r(null),d={label:"Todos",value:null},D=r(null),x=r([d]),F=r([d]),S=r([d]),T=r([d]),m=r({global:{value:null,matchMode:ae.CONTAINS}}),I=r(!0),$=r([]),o=r({dm:"",id_planta:"",id_setor:"",id_centro_custo:"",id_funcionario:"",voucher:"",data_inicio:"",data_final:""}),A=t=>{const e=t.getDate(),l=t.getMonth()+1,p=t.getFullYear();return`${e}/${l}/${p}`},M=t=>t?new Date(t).toISOString():null,L=async()=>{const t={id_cliente:i.userIdCliente,id_dm:o.value.dm===null?void 0:o.value.dm,id_planta:o.value.id_planta===null?void 0:o.value.id_planta,id_centro_custo:o.value.id_centro_custo===null?void 0:o.value.id_centro_custo,id_setor:o.value.id_setor===null?void 0:o.value.id_setor,id_funcionario:o.value.id_funcionario===null?void 0:o.value.id_funcionario,data_inicio:M(o.value.data_inicio),data_final:M(o.value.data_final)};try{const e=await v.post("",t,{headers:{Authorization:`Bearer ${i.token}`}});B.value=e.data}catch(e){console.error("Erro ao buscar centros de custo:",e)}},R=()=>{I.value=!0,$.value={}},H=r(null),Q=async()=>{const t={id_cliente:i.userIdCliente};try{const e=await v.get("/relatorioRetiAv/listardm",{params:t,headers:{Authorization:`Bearer ${i.token}`}});x.value=[d,...e.data.map(({id_dm:l})=>({label:`DM  ${l}`,value:l}))]}catch(e){console.error("Erro ao carregar lista de dms:",e)}},j=async()=>{const t={id_cliente:i.userIdCliente};try{const e=await v.post("funcionarios/listarplanta",t,{headers:{Authorization:`Bearer ${i.token}`}});F.value=[d,...e.data.map(({id_planta:l})=>({label:`Planta  ${l}`,value:l}))]}catch(e){console.error("Erro ao buscar opções de plantas:",e)}},K=async()=>{const t={id_cliente:i.userIdCliente};try{const e=await v.post("funcionarios/listarsetor",t,{headers:{Authorization:`Bearer ${i.token}`}});S.value=[d,...e.data.map(({id_setor:l})=>({label:`Setor  ${l}`,value:l}))]}catch(e){console.error("Erro ao buscar setores/diretorias:",e)}},G=async()=>{const t={id_cliente:i.userIdCliente};try{const e=await v.post("funcionarios/listarcentrocusto",t,{headers:{Authorization:`Bearer ${i.token}`}});T.value=[d,...e.data.map(({id_centro_custo:l})=>({label:`Centro de Custo  ${l}`,value:l}))]}catch(e){console.error("Erro ao buscar centros de custo:",e)}},Y=async()=>{const t={id_cliente:i.userIdCliente};try{const e=await v.post("/funcionarios/listar",t,{headers:{Authorization:`Bearer ${i.token}`}});D.value=e.data.map(l=>({label:l.nome,value:l.id_funcionario}))}catch(e){console.error("Erro ao carregar usuários:",e)}},q=()=>{var t,e,l,p,f,h;(t=b.value)!=null&&t.overlayVisible&&b.value.hide(),(e=V.value)!=null&&e.overlayVisible&&V.value.hide(),(l=y.value)!=null&&l.overlayVisible&&y.value.hide(),(p=w.value)!=null&&p.overlayVisible&&w.value.hide(),(f=g.value)!=null&&f.overlayVisible&&g.value.hide(),(h=k.value)!=null&&h.overlayVisible&&k.value.hide()},U=()=>{q()};return ee(()=>{Q(),j(),K(),Y(),G()}),(t,e)=>{const l=u("Dropdown"),p=u("Button"),f=u("InputIcon"),h=u("InputText"),J=u("IconField"),c=u("Column"),W=u("DataTable"),X=u("Card");return C(),z("div",te,[a("div",ne,[a("div",se,[re,I.value?(C(),z("div",ie,[a("div",de,[ce,n(l,{class:"drop",modelValue:o.value.dm,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.dm=s),options:x.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown1",ref:b},null,8,["modelValue","options"])]),a("div",ue,[pe,n(l,{class:"drop",modelValue:o.value.id_planta,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.id_planta=s),options:F.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown2",ref:V},null,8,["modelValue","options"])]),a("div",_e,[ve,n(l,{class:"drop",modelValue:o.value.id_setor,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.id_setor=s),options:S.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown3",ref:y},null,8,["modelValue","options"])]),a("div",me,[fe,n(l,{class:"drop",modelValue:o.value.id_centro_custo,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.id_centro_custo=s),options:T.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown4",ref:w},null,8,["modelValue","options"])]),a("div",he,[be,n(l,{class:"drop",modelValue:o.value.id_funcionario,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.id_funcionario=s),options:D.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown5",ref:g},null,8,["modelValue","options"])]),a("div",Ve,[ye,n(l,{class:"drop",modelValue:o.value.id_funcionario,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.id_funcionario=s),options:D.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref_key:"dropdown6",ref:k},null,8,["modelValue","options"])]),a("div",we,[ge,n(E(O),{class:"drop",modelValue:o.value.data_inicio,"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.data_inicio=s),showIcon:"",showOnFocus:!1,format:A,locale:"pt-BR","auto-apply":"",ref:"datepicker1","enable-time-picker":!1,onOpen:U,placeholder:"Selecione uma data inicial"},null,8,["modelValue"])]),a("div",ke,[De,n(E(O),{class:"drop",modelValue:o.value.data_final,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.data_final=s),showIcon:"",showOnFocus:!1,format:A,locale:"pt-BR","auto-apply":"",ref:"datepicker1","enable-time-picker":!1,placeholder:"Selecione uma data final",onOpen:U},null,8,["modelValue"])]),a("div",Ie,[n(p,{class:"filtrar",type:"button",label:"Filtrar Dados",icon:"pi pi-search",severity:"info",onClick:L})])])):N("",!0),a("div",Ce,[n(W,{filters:m.value,"onUpdate:filters":e[9]||(e[9]=s=>m.value=s),value:B.value,stripedRows:"",showGridlines:"",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],rowHover:"",globalFilterFields:["ID_DM","Dia","matricula","nome","email","ProdutoSKU","item","Quantidade"],tableStyle:{width:"100%"},ref_key:"dt",ref:H},{header:_(()=>[a("div",Be,[n(J,{iconPosition:"left"},{default:_(()=>[n(f,null,{default:_(()=>[xe]),_:1}),n(h,{modelValue:m.value.global.value,"onUpdate:modelValue":e[8]||(e[8]=s=>m.value.global.value=s),placeholder:"Busca"},null,8,["modelValue"])]),_:1})])]),empty:_(()=>[P(" Nenhuma retirada avulsa realizada ")]),default:_(()=>[n(c,{field:"ID_DM",sortable:"",header:"DM"}),n(c,{field:"Dia",sortable:"",header:"Data"}),n(c,{field:"matricula",sortable:"",header:"Matricula"}),n(c,{field:"nome",sortable:"",header:"Nome do Funcionário"}),n(c,{field:"email",sortable:"",header:"E-mail"}),n(c,{field:"ProdutoSKU",sortable:"",header:"CA"}),n(c,{field:"item",sortable:"",header:"Item"}),n(c,{field:"Quantidade",sortable:"",header:"Quantidade",class:"text-center"})]),_:1},8,["filters","value"])]),I.value?N("",!0):(C(),oe(X,{key:1},{title:_(()=>[P(le($.value.dm),1)]),content:_(()=>[n(p,{type:"button",label:"Voltar",icon:"pi pi-check",severity:"info",onClick:R})]),_:1}))])])])}}};export{Ae as default};
