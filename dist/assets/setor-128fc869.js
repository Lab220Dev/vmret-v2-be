import{r as i,e as Y,m as Z,q as ee,C as oe,s as te,g as v,o as b,c as K,h as l,w as n,z as V,a as g,l as w,d as o,i as h,k as le,y as c,t as $}from"./index-049900ab.js";/* empty css             */import{L as ae}from"./LoadingSpinner-fcf5a171.js";/* empty css                                                       */const se={class:"card vh"},ie={class:"col-12"},ne={class:"grid"},de={class:"col-12"},re={class:"card"},ue={class:"p-fluid formgrid grid m-0 p-0"},ce={class:"full lg:col-12 md:col-12 sm:col-12"},me=o("label",{for:"codigo"},"Código:",-1),ve={class:"full lg:col-12 md:col-12 sm:col-12"},pe=o("label",{for:"nome"},"Setor (Nome):",-1),fe={class:"full lg:col-12 md:col-12 sm:col-12"},_e=o("label",{for:"centro"},"Centro de Custo (Nome):",-1),ye={class:"mr-1 mt-4 grid justify-content-end"},be={class:"col-12"},Se={class:"p-fluid formgrid grid"},ge={class:"field lg:col-12 md:col-6 sm:col-4"},he=o("label",{class:"mr-2",for:"name"},"Nome:",-1),ke={class:"field lg:col-4 md:col-6 sm:col-4"},Ce=o("label",{class:"mr-2",for:"Quantidade"},"Quantidade:",-1),Ve={class:"grid"},we={class:"col-12"},xe=o("label",{for:"Produto",class:"mr-2 font-semibold col-2"},"Produto: ",-1),Ie={class:"col-12"},De=o("label",{for:"Quantidade",class:"font-semibold w-6rem mr-2"},"Quantidade: ",-1),ze={class:"flex justify-content-end gap-2"},Ue={class:"confirmation-content"},Ae=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ne={key:0},Be={class:"confirmation-content"},Te=o("i",{class:"pi pi-exclamation-triangle mr-1",style:{"font-size":"2rem"}},null,-1),je={__name:"setor",setup($e){const u=i(0),p=Y(),x=Z(),q=i([]);i([]);const I=i(!1);i([]);const k=i(!1),N=i(!1),S=i(!1),_=i(!1),M=i(!1),m=i({}),y=i({}),B=i([]),P={label:"Todos",value:null},E=i([P]),r=i(!1);let s=ee({codigo:"",nome:"",id_centro_custo:""});const O=a=>{s=a.data,u.value=1,_.value=!0},G=()=>{_.value?j():Q()},C=async()=>{const a={id_cliente:p.userIdCliente};r.value=!0;try{const e=await w.post("/Setor/listar",a,{headers:{Authorization:`Bearer ${p.token}`}});q.value=e.data}catch(e){console.error("Erro ao listar Funções e Diretorias:",e)}finally{r.value=!1}},Q=async()=>{const a={id_cliente:p.userIdCliente,...s};r.value=!0;try{const e=await w.post("/Setor/adicionar",a,{headers:{Authorization:`Bearer ${p.token}`}});C(),u.value=0,D()}catch(e){console.error("Erro ao adicionar Funções e Diretorias:",e)}finally{r.value=!1}},H=async()=>{let a={id_setor:s.id_setor};r.value=!0;try{await w.post("/Setor/deletar",a,{headers:{Authorization:`Bearer ${p.token}`}}),x.add({severity:"success",summary:"Successful",detail:"Função Deletada",life:3e3}),k.value=!1,C(),u.value=0,D()}catch{x.add({severity:"error",summary:"Error",detail:"Erro ao deletar a função",life:3e3})}finally{r.value=!1}u.value=0},j=async()=>{r.value=!0;const a={...s};try{const e=await w.post("/Setor/atualizar",a,{headers:{Authorization:`Bearer ${p.token}`}});C(),u.value=0,D()}catch(e){console.error("Erro ao atualizar Funções e Diretorias:",e)}finally{r.value=!1}},J=async()=>{r.value=!0;const a={id_cliente:p.userIdCliente};try{const e=await w.post("/cdc/listar",a,{headers:{Authorization:`Bearer ${p.token}`}});E.value=[P,...e.data.map(({ID_CentroCusto:f,Nome:z})=>({label:`Centro  ${z}`,value:f}))]}catch(e){console.error("Erro ao listar centros de custo:",e)}finally{r.value=!1}};oe(u,(a,e)=>{a!==e&&a===0&&(D(),C(),S.value=!1,_.value=!1)});const D=()=>{s.codigo="",s.nome="",s.id_centro_custo="",M.value=!1},W=async a=>{await O(a)};te(()=>{C(),J()});const F=()=>{B.sku!==y.value.sku?(B.push(y.value),y.value={},S.value=!1,x.add({severity:"success",summary:"Successful",detail:"Item Adicionado",life:3e3})):(B[findIndexById(m.value.sku)]=m.value,x.add({severity:"success",summary:"Successful",detail:"Item atualizado",life:3e3}),m.value={},I.value=!1)};return(a,e)=>{const f=v("Column"),z=v("DataTable"),T=v("TabPanel"),U=v("InputText"),L=v("Dropdown"),d=v("Button"),R=v("TabView"),A=v("Dialog"),X=v("InputNumber");return b(),K("div",se,[l(R,{activeIndex:u.value,"onUpdate:activeIndex":e[19]||(e[19]=t=>u.value=t)},{default:n(()=>[l(T,{header:"Listar Setores"},{default:n(()=>[o("div",ie,[l(z,{value:q.value,stripedRows:"",selectionMode:"single",tableStyle:"min-width: 25%",rowsPerPageOptions:[5,10,20,50],rows:10,dataKey:"codigo",metaKeySelection:!1,onRowSelect:W},{empty:n(()=>[h(" Nenhuma Setor adicionada. ")]),default:n(()=>[l(f,{field:"codigo",header:"Código"}),l(f,{field:"nome",header:"Setor (Nome)"}),l(f,{field:"id_centro_custo",header:"Centro de Custo"})]),_:1},8,["value"])])]),_:1}),l(T,{header:"Adicionar Setor",activeIndex:u.value,"onUpdate:activeIndex":e[18]||(e[18]=t=>u.value=t)},{default:n(()=>[o("div",ne,[o("div",de,[o("div",re,[o("form",{onSubmit:le(G,["prevent"])},[o("div",ue,[o("div",ce,[me,l(U,{class:"my-2",id:"codigo",modelValue:c(s).codigo,"onUpdate:modelValue":e[0]||(e[0]=t=>c(s).codigo=t),required:""},null,8,["modelValue"])]),o("div",ve,[pe,l(U,{class:"my-2",id:"nome",modelValue:c(s).nome,"onUpdate:modelValue":e[1]||(e[1]=t=>c(s).nome=t),required:""},null,8,["modelValue"])]),o("div",fe,[_e,l(L,{class:"drop",modelValue:c(s).id_centro_custo,"onUpdate:modelValue":e[2]||(e[2]=t=>c(s).id_centro_custo=t),options:E.value,optionLabel:"label",optionValue:"value",placeholder:"Todos",ref:"dropdown3"},null,8,["modelValue","options"])])]),o("div",ye,[_.value?(b(),V(d,{key:0,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"primary",onClick:j})):g("",!0),_.value?(b(),V(d,{key:1,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Excluir",icon:"pi pi-trash",severity:"danger",onClick:e[3]||(e[3]=t=>k.value=!0)})):g("",!0),_.value?g("",!0):(b(),V(d,{key:2,style:{width:"15%"},class:"flex align-items-center justify-content-center m-2 mr-0",label:"Salvar",icon:"pi pi-check",severity:"info",onClick:Q}))]),o("div",be,[_.value?(b(),V(R,{key:0},{default:n(()=>[l(T,{header:"Itens Disponíveis para o Setor"},{default:n(()=>[l(d,{class:"my-3",onClick:e[4]||(e[4]=t=>S.value=!0),label:"Adicionar"}),l(z,{class:"",value:a.ItensSetorAdm,stripedRows:"",dataKey:"sku",modelValue:c(s).itemsSelecionadosSetor,"onUpdate:modelValue":e[5]||(e[5]=t=>c(s).itemsSelecionadosSetor=t)},{default:n(()=>[l(f,{field:"sku",header:"SKU"}),l(f,{field:"quantidade",header:"Quantidade"}),l(f,{field:"prazo",header:"Prazo"})]),_:1},8,["value","modelValue"])]),_:1})]),_:1})):g("",!0),l(A,{visible:I.value,"onUpdate:visible":e[9]||(e[9]=t=>I.value=t),style:{width:"450px"},header:"Edição do Item",modal:!0,class:"p-fluid"},{footer:n(()=>[l(d,{label:"Cancelar",icon:"pi pi-times",text:"",onClick:e[8]||(e[8]=t=>I.value=!1)}),l(d,{label:"Salvar",icon:"pi pi-check",text:"",onClick:F})]),default:n(()=>[o("div",null,[o("div",Se,[o("div",ge,[he,l(U,{disabled:"",modelValue:m.value.name,"onUpdate:modelValue":e[6]||(e[6]=t=>m.value.name=t),id:"name",type:"text"},null,8,["modelValue"])]),o("div",ke,[Ce,l(U,{id:"Quantidade",modelValue:m.value.quantidade,"onUpdate:modelValue":e[7]||(e[7]=t=>m.value.quantidade=t)},null,8,["modelValue"])])])])]),_:1},8,["visible"]),l(A,{visible:S.value,"onUpdate:visible":e[13]||(e[13]=t=>S.value=t),modal:"",header:"Adicionar Itens do Setor"},{default:n(()=>[o("div",Ve,[o("div",we,[xe,l(L,{modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=t=>y.value=t),options:a.ItensSetorAdm,optionLabel:"name",placeholder:"Selecione um produto",class:"col-8 p-0"},null,8,["modelValue","options"])]),o("div",Ie,[De,l(X,{id:"Quantidade",modelValue:y.value.quantidade,"onUpdate:modelValue":e[11]||(e[11]=t=>y.value.quantidade=t),inputClass:"col-3",autocomplete:"off",min:1,max:999},null,8,["modelValue"])])]),o("div",ze,[l(d,{type:"button",label:"Cancelar",severity:"secondary",onClick:e[12]||(e[12]=t=>S.value=!1)}),l(d,{type:"button",label:"Adicionar",onClick:F})])]),_:1},8,["visible"]),l(A,{visible:N.value,"onUpdate:visible":e[15]||(e[15]=t=>N.value=t),style:{width:"450px"},header:"Deletar Item",modal:!0},{footer:n(()=>[l(d,{label:"Não",icon:"pi pi-times",text:"",onClick:e[14]||(e[14]=t=>N.value=!1)}),l(d,{label:"Sim",icon:"pi pi-check",text:"",onClick:a.deleteProduct},null,8,["onClick"])]),default:n(()=>[o("div",Ue,[Ae,m.value?(b(),K("span",Ne,[h("Você tem certeza que quer deletar o Item "),o("b",null,$(m.value.name),1),h(" ?")])):g("",!0)])]),_:1},8,["visible"]),l(A,{header:"Deletar setor?",visible:k.value,"onUpdate:visible":e[17]||(e[17]=t=>k.value=t),style:{width:"400px"},modal:!0,closable:!1},{footer:n(()=>[l(d,{label:"Não",icon:"pi pi-times",onClick:e[16]||(e[16]=t=>k.value=!1),class:"p-button-text"}),l(d,{label:"Sim",icon:"pi pi-check",onClick:H,class:"p-button-text"})]),default:n(()=>[o("div",Be,[Te,o("span",null,[h("Você tem certeza que deseja deletar o setor "),o("b",null,$(c(s).codigo),1),h(" - "),o("b",null,$(c(s).nome),1),h(" ?")])])]),_:1},8,["visible"])])],32)])])])]),_:1},8,["activeIndex"])]),_:1},8,["activeIndex"]),r.value?(b(),V(ae,{key:0})):g("",!0)])}}};export{je as default};
